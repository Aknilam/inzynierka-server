<!doctype html>
<html lang="en" ng-app="mmApp">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <title>SiLVA</title>  

  <link rel="stylesheet" href="app.css"/> 

  <script src="app.js"></script>
  
</head>

<body ng-controller="mmCtrl">

  <ons-screen>

    <ons-sliding-menu 
      behind-page="menu.html" 
      above-page="navigatorLogin.html">
    </ons-sliding-menu>

  </ons-screen>

  <pageslide ng-controller="mmMaterialCtrl" ps-open="material.isSet && material.isOpen">
    <div class="content">
      <div class="row">&nbsp;</div>
      <div class="row">
        <div class="col-md-1"></div>
        <div class="col-md-10">
          <i class="fa fa-arrow-right fa-2x pointer" ng-click="material.unset()"></i>
          <button type="button" class="close pull-right" style="outline: none;" ng-click="$root.MATERIALS.remove($event, material.focused)"><span aria-hidden="true">&times;</span><span class="sr-only">Remove</span></button>
        </div>
        <div class="col-md-1">
        </div>
      </div>
      <div class="row">
        <div class="col-md-1"></div>
        <div class="col-md-10">
          <dl>
            <dt>Name</dt>
            <dd>{{material.focused.name}}</dd>
            <dt>Description</dt>
            <dd>{{material.focused.description}}</dd>
            <dt>Coordinates</dt>
            <dd>({{material.focused.lat}}, {{material.focused.lng}})</dd>
            <dt ng-show="material.focused.angle">Angle</dt>
            <dd ng-show="material.focused.angle">
              <canvas width="60" height="60" id="canvas" mm-compass="material.focused.iconAngle" disallow-change="true"></canvas>
              {{material.focused.iconAngle}}
            </dd>
            <dt ng-show="material.focused.fileName">Image</dt>
            <dd ng-show="material.focused.fileName">
              <img
                ng-if="material.focused.fileName"
                style="max-width: 100%; max-height: 50%;"
                ng-src="materials/{{$root.PROJECT.actual.folderName}}/{{material.focused.fileName}}">
            </dd>
            <dt>Tags</dt>
            <dd>
              <tags-input
                ng-model="material.focused.pluginTags"
                display-property="name"
                on-tag-added="$root.MATERIALS.addPossibleTag(material.focused, $tag)"
                on-tag-removed="$root.MATERIALS.removeTag(material.focused, $tag)">
                  <auto-complete source="$root.TAGS.getDataFor($query)"></auto-complete>
              </tags-input>
              <select class="form-control" ng-model="selectedTag" ng-init="selectedTag = $root.TAGS.getFirstProperty($root.TAGS.data)" ng-options="tag.name for (name, tag) in $root.TAGS.data">
              </select>
              <button
                type="submit"
                class="btn btn-default"
                ng-click="$root.MATERIALS.addTag(material.focused, selectedTag)">
                  Add tag
              </button>
            </dd>
          </dl>
        </div>
        <div class="col-md-1">
        </div>
      </div>
    </div>
  </pageslide>
  <mm-alert/>
  <section ui-view></section>
</body>
</html>
